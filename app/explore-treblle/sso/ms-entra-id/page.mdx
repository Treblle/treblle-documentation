---
title: "Microsoft Entra ID"
metaTitle: "Configure SSO with Microsoft Entra ID - Treblle Documentation"
description: "Step-by-step guide to configure Single Sign-On (SSO) for your Treblle workspace using Microsoft Entra ID (formerly Azure AD) with SAML authentication."
---

import { ImageCard } from "~components/cards/image-card";
import { NoteCard } from "~components/cards/note";
import { TipCard } from "~components/cards/tip";
import { CautionCard } from "~components/cards/caution";
import { InfoTable } from "~components/tables/info-table";
import { Checklist } from "~components/sections/checklist";
import PaginationCards from "~components/cards/pagination-cards";

# SSO with Microsoft Entra ID

<NoteCard>
**Enterprise Feature**: Single Sign-On with Microsoft Entra ID is available for Enterprise workspaces. Contact your Treblle account manager to enable SSO for your workspace.
</NoteCard>

## Overview

Integrate Treblle with Microsoft Entra ID (formerly Azure Active Directory) to enable secure Single Sign-On for your team. This guide walks you through configuring SAML-based authentication between Microsoft Entra ID and Treblle.

### Prerequisites

Before you begin, ensure you have:

<Checklist>
    <Checklist.item id="workspace-owner">**Workspace Owner Role**: You must be a workspace owner in Treblle</Checklist.item>
    <Checklist.item id="azure-access">**Azure Admin Access**: Administrative access to your Microsoft Entra ID tenant</Checklist.item>
    <Checklist.item id="enterprise-plan">**Enterprise Plan**: SSO is available on Enterprise plans only</Checklist.item>
</Checklist>

## Configuration Process

The SSO setup process involves two main steps:
1. Configure an Enterprise Application in Microsoft Entra ID
2. Configure SSO settings in Treblle

---

## Part 1: Microsoft Entra ID Configuration

### Step 1: Access Microsoft Entra ID Portal

1. Navigate to the [Azure Portal](https://portal.azure.com)
2. Go to **Microsoft Entra ID** (formerly Azure Active Directory)

<ImageCard src="/platform/sso/entra-id/1-dashboard.jpg" alt="Microsoft Entra ID Dashboard" />

The Microsoft Entra ID overview page will display your tenant information.

3. From the left navigation menu, click **Add** dropdown and select **Enterprise application**

<ImageCard src="/platform/sso/entra-id/2-select-option.jpg" alt="Add Enterprise Application" />

### Step 2: Create Enterprise Application

1. Click **Create your own application** from the app gallery

<ImageCard src="/platform/sso/entra-id/3-create-app.jpg" alt="Create Enterprise Application" />

2. In the dialog that appears:
   - **What's the name of your app?**: Enter `Treblle SSO Test` (or your preferred name)
   - **What are you looking to do with your application?**: Select **Integrate any other application you don't find in the gallery (Non-gallery)**
3. Click **Create**

<TipCard>
**Application Name**: Choose a descriptive name that helps your team identify this application, such as "Treblle Production" or "Treblle SSO".
</TipCard>

### Step 3: Set Up Single Sign-On

1. After creating the application, you'll be redirected to the application overview page
2. From the **Getting Started** section, click **2. Set up single sign on**

<ImageCard src="/platform/sso/entra-id/4-setup-sso.jpg" alt="Setup SSO from Getting Started" />

3. On the **Select a single sign-on method** page, select **SAML**

<ImageCard src="/platform/sso/entra-id/5-saml.jpg" alt="Select SAML Authentication Method" />

### Step 4: Configure Basic SAML Settings

In the **Basic SAML Configuration** section, click **Edit** and configure the following:

<ImageCard src="/platform/sso/entra-id/6-fill-details.jpg" alt="Basic SAML Configuration Edit Dialog" />

#### Required Fields

Enter the following Treblle URLs exactly as shown:

<InfoTable title="Field" description="Value">
    <InfoTable.Row
        title="Identifier (Entity ID)"
        description="https://identity.treblle.com/auth/saml2"
    />
    <InfoTable.Row
        title="Reply URL (Assertion Consumer Service URL)"
        description="https://identity.treblle.com/login/saml/callback"
    />
    <InfoTable.Row
        title="Sign on URL"
        description="https://identity.treblle.com/enterprise-login"
    />
</InfoTable>

<NoteCard>
**Important**: In the Reply URL, replace `treblle` with your chosen company identifier. This identifier should match what you'll configure in Treblle later (e.g., `treblle-entra-id`, `your-company-name`).
</NoteCard>

#### Optional Fields

- **Relay State**: Leave empty (optional)
- **Logout URL**: Leave empty (optional)

Click **Save** after entering the required information.

### Step 5: Review Attributes & Claims

The default attributes should work correctly. Microsoft Entra ID will map these attributes:

<InfoTable title="Claim Name" description="Source Attribute">
    <InfoTable.Row
        title="givenname"
        description="user.givenname"
    />
    <InfoTable.Row
        title="surname"
        description="user.surname"
    />
    <InfoTable.Row
        title="emailaddress"
        description="user.mail"
    />
    <InfoTable.Row
        title="name"
        description="user.userprincipalname"
    />
    <InfoTable.Row
        title="Unique User Identifier"
        description="user.userprincipalname"
    />
</InfoTable>

<TipCard>
The default attribute mappings work for most organizations. Only modify these if your organization has specific requirements.
</TipCard>

### Step 6: Download SAML Certificate and Note Configuration URLs

After saving the Basic SAML Configuration, scroll down to view the complete SAML setup page. This page shows all the information you'll need:

<ImageCard src="/platform/sso/entra-id/download-certificate.jpg" alt="SAML Certificates Section" />

In the **SAML Certificates** section (section 3):

1. Locate **Certificate (Base64)**
2. Click **Download** to save the certificate file

<CautionCard>
**Security**: Keep this certificate file secure. You'll need its contents to configure Treblle in the next section.
</CautionCard>

### Step 7: Copy Configuration URLs

On the same SAML configuration page, look at section 4 **Set up Treblle**:

<ImageCard src="/platform/sso/entra-id/7-find-details.jpg" alt="Copy Configuration" />

Copy the following two values - you'll need these for Treblle configuration:

<InfoTable title="Field" description="Purpose">
    <InfoTable.Row
        title="Login URL"
        description="URL where users will be redirected to authenticate (maps to Assertion Consumer Service URL in Treblle)"
    />
    <InfoTable.Row
        title="Microsoft Entra Identifier"
        description="Your IdP Issuer URL (required for Treblle configuration)"
    />
</InfoTable>

**Example values from the image above:**
- **Login URL**: `https://login.microsoftonline.com/0a27fe0d-8c82-...`
- **Microsoft Entra Identifier**: `https://sts.windows.net/0a27fe0d-8c82-46f4-b29d...`

<NoteCard>
The **Microsoft Entra Identifier** is critical. It typically looks like: `https://sts.windows.net/{tenant-id}/`
</NoteCard>

---

## Part 2: Treblle Configuration

### Step 8: Access Treblle Authentication Settings

1. Log in to your Treblle workspace as a workspace owner
2. Navigate to **Settings** → **Authentication**

You can access this directly via:

```
https://platform.treblle.com/workspaces/{workspaceId}/settings/authentication/create
```

<ImageCard src="/platform/sso/entra-id/sso-page.jpg" alt="Treblle Authentication Settings - Empty State" />

3. Click **Configure SSO** to begin the setup

<ImageCard src="/platform/sso/entra-id/sso-before.jpg" alt="Empty SSO Configuration Form" />

### Step 9: Configure SSO in Treblle

Fill in the following fields with the information from Microsoft Entra ID:

#### Company Email Identifier

Enter a unique identifier for your organization (this is used when users sign in with SSO):
```
treblle
```

**Example**: `treblle`, `acme-corp`, `your-company-name`

<TipCard>
Choose a memorable identifier - users will need to enter this when signing in via SSO. Use lowercase letters, numbers, and hyphens only. This should match the identifier you used in the Reply URL in Step 4.
</TipCard>

#### Authentication Type

Select **SAML** from the dropdown menu.

#### Assertion Consumer Service URL

**This field needs the "Login URL" value from Microsoft Entra ID Step 7.**

Paste the **Login URL** you copied from Azure. It should look like:
```
https://login.microsoftonline.com/0a27fe0d-8c82-46f4-b29d.../saml2
```

<CautionCard>
**Critical**: Make sure to paste the **Login URL** from Azure into this field, NOT a Treblle URL.
</CautionCard>

#### Identity Provider Issuer

Paste the **Microsoft Entra Identifier** URL you copied from Azure. It should look like:
```
https://sts.windows.net/0a27fe0d-8c82-46f4-b29d-765493c80899/
```

#### Identity Provider Certificate

1. Open the downloaded Certificate (Base64) file in a text editor
2. The certificate file will look like this:

```
-----BEGIN CERTIFICATE-----
MIIC8DCCAdigAwIBAgIQeGtfDKjn05tBz9UKHNMfjjANBgkqhkiG9w0BAQsFADA0MTIwMAYDVQQD
EylNaWNyb3NvZnQgQXp1cmUgRmVkZXJhdGVkIFNTTyBDZXJ0aWZpY2F0ZTAeFw0yNDExMDQxMzI1
NDFaFw0yNzExMDQxMzI1NDFaMDQxMjAwBgNVBAMTKU1pY3Jvc29mdCBBenVyZSBGZWRlcmF0ZWQg
U1NPIENlcnRpZmljYXRlMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuDaI4BAJ*********
*********************************************************************************
*********************************************************************************
vZozH+CUD/ejNBiAn1TOIOxm3XTCv2SzOqenr
iLuYibYimC784HmnYewX4eaC8pTm
oHFzyok4AcfznUykKVLHTCzNSQ3yS1uxrYCzaT82kUGwV2ezQt0kotPxf8+nntt73IdGiZdU++AT
dqaOufZCUxKdwvjDau/YmOtrQkJBNBMGrF783ef5K6Z9UEoLJ6TEMh1+JLGOjUvgHxhlhNf9dXsT
J1yRnAlJ6YLGXeKH+/KnBDqggGdZYEYZ2fVwmcoQGy7aoNPpKrG15ZRN9La8LOjnRFAbGWEgL1xK
f9lPHEU1NgAreDBgUizK
-----END CERTIFICATE-----
```

3. Copy **only** the certificate content between the markers (excluding the BEGIN and END lines)
4. The content you paste into Treblle should look like this:

```
MIIC8DCCAdigAwIBAgIQeGtfDKjn05tBz9UKHNMfjjANBgkqhkiG9w0BAQsFADA0MTIwMAYDVQQD
EylNaWNyb3NvZnQgQXp1cmUgRmVkZXJhdGVkIFNTTyBDZXJ0aWZpY2F0ZTAeFw0yNDExMDQxMzI1
NDFaFw0yNzExMDQxMzI1NDFaMDQxMjAwBgNVBAMTKU1pY3Jvc29mdCBBenVyZSBGZWRlcmF0ZWQg
U1NPIENlcnRpZmljYXRlMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAuDaI4BAJ*********
*********************************************************************************
*********************************************************************************
vZozH+CUD/ejNBiAn1TOIOxm3XTCv2SzOqenr
iLuYibYimC784HmnYewX4eaC8pTm
oHFzyok4AcfznUykKVLHTCzNSQ3yS1uxrYCzaT82kUGwV2ezQt0kotPxf8+nntt73IdGiZdU++AT
dqaOufZCUxKdwvjDau/YmOtrQkJBNBMGrF783ef5K6Z9UEoLJ6TEMh1+JLGOjUvgHxhlhNf9dXsT
J1yRnAlJ6YLGXeKH+/KnBDqggGdZYEYZ2fVwmcoQGy7aoNPpKrG15ZRN9La8LOjnRFAbGWEgL1xK
f9lPHEU1NgAreDBgUizK
```

<NoteCard>
**Important**: Remove the `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----` lines. Paste only the certificate content between these markers.
</NoteCard>

#### Complete Configuration Example

Here's what your completed SSO configuration should look like:

<ImageCard src="/platform/sso/entra-id/information.jpg" alt="Set up Treblle - Copy URLs" />


The image above shows:
- **Company Email Identifier**: `treblle` (your unique identifier)
- **Authentication Type**: SAML (selected from dropdown)
- **Assertion Consumer Service URL**: The Login URL copied from Azure
- **Identity Provider Issuer**: The Microsoft Entra Identifier from Azure
- **Identity Provider Certificate**: The certificate content (without BEGIN/END markers)

### Step 10: Enable SSO Login

Check the box **Enable SSO Login** at the bottom of the form.

This will activate SSO for your workspace once you save the configuration.

### Step 11: Save Configuration

Click **Save Authentication** to apply your SSO settings.

---

## Part 3: Testing SSO in Azure Portal

### Step 12: Test SSO Configuration

Before rolling out to your team, test the SSO configuration in Azure:

1. Go back to your Enterprise Application in Azure Portal
2. Navigate to **Single sign-on** settings
3. Scroll to section 5 **Test single sign-on with Treblle SSO Test**
4. Click **Test**

<ImageCard src="/platform/sso/entra-id/8-test.jpg" alt="Test SSO Dialog in Azure" />

A test panel will appear on the right side showing:
- **Testing sign in**: Instructions for testing
- **Test sign in** button: Click this to test as your current user
- **Resolving errors**: Section for troubleshooting if needed

<CautionCard>
**Important**: You must assign users to the Enterprise Application before they can sign in. See Step 13 below.
</CautionCard>

### Step 13: Assign Users in Microsoft Entra ID

Before users can sign in, you must assign them to the application:

1. In Azure Portal, go to your Enterprise Application
2. Click **Users and groups** from the left menu
3. Click **+ Add user/group**
4. Select users or groups to grant access
5. Click **Assign**

<TipCard>
**Bulk User Management**: Assign Azure AD groups to the application rather than individual users for easier management at scale.
</TipCard>

---

## Part 4: User Login Flow

### Step 14: Sign In with SSO

Once SSO is configured, users can sign in via SSO:

1. Go to [https://identity.treblle.com/login](https://identity.treblle.com/login) or simply [identity.treblle.com](https://identity.treblle.com)
2. Click **Sign in with SSO**

<ImageCard src="/platform/sso/entra-id/12-enter-sso.png" alt="Enter SSO Identifier" />

3. Enter your organization identifier (the Company Email Identifier from Step 9)

<ImageCard src="/platform/sso/entra-id/11-sign-sso.jpg" alt="Treblle Sign In Page with SSO Option" />

In the example above, the identifier is `treblle`. Enter the identifier you configured in Step 9.

4. Click **Continue**
5. You'll be redirected to Microsoft login

<ImageCard src="/platform/sso/entra-id/13-microsoft-login.jpg" alt="Microsoft Account Picker" />

6. Select your Microsoft account or click "Use another account"
7. Authenticate with your Microsoft credentials
8. You'll be redirected back to Treblle and logged in

### Post-Login Redirect Behavior

**If you initially accessed identity.treblle.com from platform.treblle.com:**
- You'll be automatically redirected back to the platform after successful login

**If you went directly to identity.treblle.com:**
- After logging in, you must manually navigate to [platform.treblle.com](https://platform.treblle.com)
- The platform will redirect you back to identity to confirm your authentication token
- You'll then be redirected back to the platform and fully authenticated

---

## Managing SSO Configuration

### Updating SSO Settings

To update your SSO configuration:

1. In Treblle, navigate to Settings → Authentication
2. Find your SSO configuration
3. Click **Edit** or the configuration name
4. Modify the necessary fields
5. Click **Save Authentication**

### Disabling SSO

To temporarily disable SSO:

1. Go to Settings → Authentication in Treblle
2. Uncheck **Enable SSO Login**
3. Click **Save Authentication**

<CautionCard>
**User Impact**: Disabling SSO will require users to sign in with their Treblle username and password. Ensure users have their credentials before disabling SSO.
</CautionCard>

### Deleting SSO Configuration

To completely remove SSO:

1. Go to Settings → Authentication in Treblle
2. Click **Delete** on your SSO configuration
3. Confirm the deletion

<CautionCard>
**Permanent Action**: Deleting the SSO configuration cannot be undone. You'll need to reconfigure from scratch if you want to re-enable SSO.
</CautionCard>

---

## Troubleshooting

### Common Issues

**Issue**: "SAML Authentication Failed" error
- **Solution**: Verify that the Login URL and Microsoft Entra Identifier are correctly copied from Azure
- Check that the certificate is properly formatted without BEGIN/END markers

**Issue**: Users can't see the Treblle application in Azure
- **Solution**: Ensure users are assigned to the Enterprise Application in Azure (see Step 13)

**Issue**: Certificate validation error
- **Solution**: Make sure you've removed the `-----BEGIN CERTIFICATE-----` and `-----END CERTIFICATE-----` lines
- Ensure there are no extra spaces or line breaks in the certificate

**Issue**: Redirect loop after login
- **Solution**: Verify that all three SAML URLs in Azure are exactly as specified in Step 4
- Clear browser cookies and try again

---

<PaginationCards />